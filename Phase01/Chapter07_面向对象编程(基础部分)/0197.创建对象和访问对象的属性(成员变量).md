# 1 由类产生一个对象

Persn p1 = new Person()

- new Person() 为 创建一个Person 的对象， 并给这个对象一个空间

- Person p1 = new Person(), 将p1 指向 这个对象 ， p1 存的就是 这个对象的空间地址

比如说 我们创建了一个人。 给这个人起名叫小明。 则 小明 指向 这个人

![](..\Image\0193_02_类和对象的概述_由类产生一个对象.png)

# 2 如何创建对象

1) 先声明再创建
   Cat cat ; //声明对象cat. 此时在 栈中 产生了 cat ---> []  , [] 为空 
   cat = new Cat(); //创建 一个 类Car 的对象， 就是 在 堆中产生了一个对象 。 并用cat 指向这个对象， cat ---> [某个地址名]， [] 中有了一个地址
2) 直接创建
   Cat cat = new Cat();

![](..\Image\0197_01_创建对象和访问对象的成员变量_如何访问属性.png)

# 3 如何访问属性 (成员变量 )

## 3.1 基本语法

对象名.属性名;

案例演示赋值和输出
cat.name ;
cat.age;
cat.color;

## 3.2 类和对象的内存分配机制

### 3.2.1 Java 内存的结构分析

1) 栈： 一般存放基本数据类型(局部变量)
2) 堆： 存放对象(Cat cat , 数组等)
3) 方法区：常量池(常量，比如字符串)， 类加载信息
4) 示意图[Cat (name, age, price)]

## 3.3 练习题1

1) 先加载Person 类信息( 就是加载 Person 这个类 里有啥 成员函数 和成员方法)
   1) 先加载的 类信息 会加载到 jvm内存的方法区
      1) ![](..\Image\0197_10_创建对象和访问对象的成员变量_类信息的加载.png)
   2) 类信息只会加载一次 到 jvm内存的方法区. 使用完一次 new Person() 这个语句之后， 之后再创建一个 Person a = new Person() 的时候 Person 这个类的 类信息 不再会再次加载到 jvm内存的方法区了。 
2) 在堆中分配空间空间给 某个对象   (看 类里面有 成员变量， 或者 某个对象 有哪些成员函数需要分配储存空间)
3) 对 这些成员变量 进行 默认值的初始化(看规则)
4) 把对象在堆中的地址 赋给p , p 就指向对象
5) 使用指定的值 进行 成员变量的值 初始化， 比如p.name =”jack”， p.age = 10

![](..\Image\0197_02_创建对象和访问对象的成员变量_练习题1_示意图1.png)

![](..\Image\0197_03_创建对象和访问对象的成员变量_练习题1_示意图2.png)

逐步分析

1. Person()
   
   1. 先加载的 Person类信息, ( 就是加载 Person 这个类 里有啥 成员函数 和成员方法)
   
   2. 会加载到 jvm内存的方法区
   
   3. ![](..\Image\0197_11_创建对象和访问对象的成员变量_练习题1_步骤分析0.png)

2. new Person()
   
   1. new 会 在堆 中 产生一个 对象， 并且对这个对象分配了  的空间。其空间地址是 0x0011
   2. 此时 这个对象中的 成员变量 age 和 name 都还只是默认值， 因为还没有对其进行赋值。 age 为 int 类型 默认值为 0. name为 String, 默认值是 Null 
   3. ![](..\Image\0197_04_创建对象和访问对象的成员变量_练习题1_步骤分析1.png)

3. Person p1 = new Person()
   
   1. 在 栈中 创建一个 p1 , 然后p1 指向 空间 0x001
   2. ![](..\Image\0197_05_创建对象和访问对象的成员变量_练习题1_步骤分析2.png)

4. p1.age  =10
   
   1. 变为10 
   
   2. int 不为引用数据类型， 所以 10 不会存在方法区的常量池里面 
   
   3. ![](..\Image\0197_06_创建对象和访问对象的成员变量_练习题1_步骤分析3.png)

5. p1.name = "小明"
   
   1. 小明 为 String。 String 为引用数据类型， 所以 小明这个值 存在常量池子里面， 小明存在 地址0x0022 中 
   
   2. ![](..\Image\0197_07_创建对象和访问对象的成员变量_练习题1_步骤分析4.png)

6. Person p2 = p1 
   
   1. 在 栈中 创建一个 p2,  让p2 指向  p1 指向的地址 。 
   
   2. p1 和 p2 指向了同一个地址空间， 就是指向了同一个 对象
   
   3. 比如一个人有 大名 小名， 都指向同一个人 
   
   4. ![](..\Image\0197_08_创建对象和访问对象的成员变量_练习题1_步骤分析5.png)

## 3.4 练习题2

![](..\Image\0197_09_创建对象和访问对象的成员变量_练习题2.png)
